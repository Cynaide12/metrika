начал делать создание документа в 2 этапа.
сделал роуты на регистрацию, создание и обновление документа.
на фронте визуал доработал чтобы все поля корректные заполнялись ток.

03.05.2025
в модели Document убрать ограничение написал где
сделать чтобы создание документа работало
доделать регистрацию документа
сделать редактирование документа
не забыть при переносе в боевой базе внести правки!!!!!

04.05.2025
еще раз пробежаться по созданию редактированию регистрации документа. проверить где что упустил и где есть недоработки в атомарности.  ФАЙЛЫ ТАК И НЕ ИСПРАВИЛ НАДО ОТКАТЬ ДЕЛАТЬ!!!!!!
при обновлении документа SheetsCount становитс отрицательным - исправить. ++
при ошибке при обновлении/регистрации документа файлы которые переместились(если переместились) и дальше по цепочке была ошибка - не откатываются. надо исправить НЕ СДЕЛАЛ!!!!!!!!!!!!!!!!



СДЕЛАТЬ ОБЯЗАТЕЛЬНЫМ ПЕРИОД ХРАНЕНИЯ ПРИ ДОБАВЛЕНИИ/ОБНОВЛЕНИИ!!!!!!!!!! +++
СДЕЛАТЬ УДАЛЕНИЕ ФАЙЛОВ!!!!!

ПОИСК В РЕЕСТРЕ РЕГИСТРАЦИИ ДОКУМЕНТОВ ПОХОДУ ИЩЕТ ТАКЖЕ И НЕ ЗАРЕГАНЫЕ ФАЙЛЫ +++

на момент 05.05.25 
остается все также атомарность, сделать удаление файлов. также разобраться как стеллажи добавлять будут


17.06.25
импортировать контрагентов из лексемы/apm

сделать историю документа -- сейчас сделан роут на добавление документа, на фронте модалку надо доделать и к бэку прикрутить
начать делать добавление стеллажа



18.06.2025
импортировать контрагентов из лексемы/apm

доделать историю документа - сделать обработку вывода ошибки на фронте если действие невалидно (например если 2 раза подряд выдача идет) + сделать добавление отдела(department)

ну и в конце концов начать добавление стеллажа




прикрутить логирование из шаблона + 
кол-во листов некорректно обновляется ++
по файлам - позаботиться о дублях файлов, делать просто уникальное имя всем файлам и санитизировать имена файлов чтобы избежать рассинхрона между именами и их путями ++


В ПЛАНАХ
1.доделать логику отправки на почту сообщений если документ не сдан вовремя(щасдаже если был сдан - все равно отправляется) -- ИСПРАВИЛ, 
 но надо изменить проверку, чтобы смотрело только на день, не включая часы/минуты/секунды
2.сделать более полное логирование ошибок сервиса обновления документов - если ошибка при откате файлов(через slog) -- надо сделать ++ 
3.в левой панели навигации если есть раздел который не имеет дочернего и родительского - не отображается иконка перехода на реестр раздела ++

24.06.2025
сделал страницу редактирования стеллажей.

на 25.06.2025
1. надо доделать страницу редактирования стеллажей - чтобы при обновлении папки не подгружались все стеллажи, а на фронте ток менялась папка без еще одного запроса
2. доделать логику отправки на почту сообщений если документ не сдан вовремя(щасдаже если был сдан - все равно отправляется) -- ИСПРАВИЛ, 
 но надо изменить проверку, чтобы смотрело только на день, не включая часы/минуты/секунды


4. сделать также привязку раздела к типу документа, чтобы при выборе раздела отображались только связанные с типом документа папки - можно потом СДЕЛАТ
13. наверное можно также сделать реестр документов по папкам - чтобы 


1. ограничить выбор раздела на диске до самого нижнего(у которых есть родитель но нет дочерних) ++ СДЕЛАЛ
2. сделать проверку есть ли похожее наименование раздела при его создании ++ уже проверяется путь ++ СДЕЛАЛ
3. привязку папок в настройках стеллажей изменить с привязку на папку ->на полку, но при этом оставить возможность если че и папки менять ++ НО НАДО НОРМ СДЕЛАТЬ ОТОБРАЖЕНИЕ
СТЕЛЛАЖЕЙ, ЩАС ОЧЕНЬ МЕДЛЕННО. ПОДГРУЖАТЬ С БЭКА ТОЛЬКО ТЕ ДАННЫЕ КОТОРЫЕ НУЖНЫ! ++ СДЕЛАЛ
5. сделать при создании документа чтобы автоматически подставлялось поле ОТВЕТСТВЕННЫЙ и СДАЛ. но при этом чтобы можно было их менять  ++ СДЕЛАЛ
6. ограничить расширение загружаемых файлов ТОЛЬКО до .pdf. сделать ограничение на размер файла - примерно 20мб пока что ++СДЕЛАЛ
6. предпросмотр документов соответственно только для PDF файлов. ++ СДЕЛАЛ
7. сделать чтобы при регистрации документа могли редактироваться вообще все поля. ДЕЛОПРОИЗВОДИТЕЛЬ И РАБОТНИК АРХИВА - ОДНО И ТО ЖЕ
8. сделать примечание необязательным при создании/редактировании/регистрации документа. ++
9. Поле номер проекта сделать в виде текста, а не числовым
10. при выборе физического места хранения сделать выбор по всем стеллажам и при этом чтобы атвоматический выбор ++ СДЕЛАЛ
11. сделать выбор кол ва листов в папке при редактировании/создании
12. сделать возможность создавать папку + редактировать - макс кол-во листов, тип документа и имя(папку у полки) В НАСТРОЙКАХ СТЕЛЛАЖА ВРОДЕ СДЕЛАЛ


не забыть про дату регистрации. щас она устанавливается, но в реестре документов не выведена(вообще нигде) и не идет по ней поиск

на 08.08.2025
1. перепроверить отправку уведомлений о истории документа - вроде сделал
2. сделать отправку уведомлений о истекших документах и их удаление

на 09.07.2025
1. доделать отправку уведомлений о истекших документах
2. сделать возможность удалять сам документ
3. правки 4 и 13 выше
4. сделать возможность добавить тип документа


ПРОВЕРИТЬ ЧТО БУДЕТ ЕСЛИ СНАЧАЛА ВЫБРАТЬ МЕСТО ХРАНЕНИЯ ФИЗИЧЕСКОЕ И ПОТОМ СМЕНИТЬ ТИП ДОКУМЕНТА - ПРОВЕРКА ЕСТЬ ЛИ КАКАЯ ТО. НА БЭКЕ ТОЖЕ СДЕЛАТЬ ЕСЛИ ЧЕ ВСЕ ГУД

сделать чтобы документ удалялся не конкретно в день истечения срока хранения, а на следующий день(или хотя бы день в день чтобы нормально удалялся) ++ удаляется день в день

спросить нужно ли реально удалять документ или просто скрыть

14.07
сделал вроде бы обновление юзера
првоерить и привязать на фронте правильно

все что выше 3 строки - все актуально кроме удаления документа день в день

16.07
чекнуть почему на сайт не заходит если на виртуалке разворачивать docker compose, бэк и база вроде бы ок разворачиваются

СДЕЛАТЬ ДОКУМЕНТАЦИЮ ПО СБОРКЕ - У МЕНЯ ЩАС RUNTIME ПОДСТАВЛЯЮТСЯ ENV В статику vite. обязательно это указать.
ну и про ci/cd если руки дойдут - не забыть


ВСЕ АКТУАЛЬНО НИЖЕ И ДОПОЛНИТЬ ДОКУМЕНТАЦИЮ ПРО  ENV ВЫШЕ ТО ЧТО
СДЕЛАТЬ ТИП ДОКУМЕНТА НЕОБЯЗАТЕЛЬНЫМ ПРИ ОБНОВЛЕНИИ ПАПКИ В НАСТРОЙКАХ СТЕЛЛАЖЕЙ ++
СДЕЛАТЬ РЕДИРЕКТ НА СТРАНИЦУ ВХОДА ЕСЛИ ОШИБКА ПОЛУЧЕНИЯ ЮЗЕРА ++
УБРАТЬ ВСЕ ВЫВОДЫ В КОНСОЛЬ ++

НА ПРОДЕ ДОБАВИТЬ ЮЗЕРОВ ЧТО КИДАЛ В ВАТСАПЕ И СОЗДАТЬ ТЕСТОВЫЙ ДОКУМЕНТ ПОЛНОСТЬЮ ЗАПОЛНИТЬ